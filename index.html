<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Typhoon</title>
    <meta name="google-site-verification" content="HrvwnWzEtN6yLS7StKHXNBkTqncD47MY4g82Vl9ZOus" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="assets/css/style.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link rel="shortcut icon" href="assets/img/typhoon.ico">
    <script>
      function showInstructions(sectionId) {
        const sections = document.querySelectorAll('.instructions');
        sections.forEach(section => section.style.display = 'none'); // Hide all sections
        const selectedSection = document.getElementById(sectionId);
        selectedSection.style.display = 'block'; // Show the selected section
        selectedSection.scrollIntoView({ behavior: 'smooth', block: 'start' }); // Scroll to the section
      }
    </script>
    <script>
      async function updateFlatpakLink() {
        const flatpakButton = document.querySelector('.btn-ubuntu[href*="typhoon.flatpak"]');
        try {
          const response = await fetch('https://api.github.com/repos/archisman-panigrahi/typhoon/releases/latest');
          if (!response.ok) throw new Error('Failed to fetch release info');
          const release = await response.json();
          const latestFlatpakUrl = release.assets.find(asset => asset.name.endsWith('.flatpak'))?.browser_download_url;
          if (latestFlatpakUrl) {
            flatpakButton.href = latestFlatpakUrl;
          }
        } catch (error) {
          console.error('Error updating Flatpak link:', error);
        }
      }

      document.addEventListener('DOMContentLoaded', updateFlatpakLink);
    </script>
    <script>
      async function fetchLatestVersion() {
        const versionElement = document.getElementById('latest-version');
        try {
          const response = await fetch('https://api.github.com/repos/archisman-panigrahi/typhoon/releases/latest');
          if (!response.ok) throw new Error('Failed to fetch release info');
          const release = await response.json();
          const latestVersion = release.tag_name.replace(/^v/, ''); // Remove the 'v' prefix
          versionElement.textContent = `Latest Version: ${latestVersion}`;
        } catch (error) {
          console.error('Error fetching latest version:', error);
          versionElement.textContent = 'Latest Version: Unable to fetch';
        }
      }

      document.addEventListener('DOMContentLoaded', fetchLatestVersion);
    </script>
  </head>
  <body>
    <div class="content">
      <h1>Typhoon</h1>
      <p><img src="assets/img/typhoon.png" width="258" height="430" alt="Typhoon"></p>
      <p class="lead">
        Typhoon is a stylish weather app available for <a href="https://en.wikipedia.org/wiki/Linux" target="_blank">GNU/Linux</a> and Windows. <br>
        <span id="latest-version">Fetching latest version...</span>
      </p>
      
      <!-- Buttons to show installation instructions -->
      <div class="buttons">
        <a class="btn-ubuntu" onclick="showInstructions('ubuntu-instructions')">Ubuntu/Mint (PPA)</a>
        <a class="btn-ubuntu" style="background-color: #232225;" href="https://github.com/archisman-panigrahi/typhoon/releases/download/v0.9/typhoon.flatpak">Flatpak</a>
        <a class="btn-ubuntu" style="background-color: #411e86;" onclick="showInstructions('other-gnu-linux-instructions')">Other GNU/Linux</a>
        <a class="btn-windows" href="">Windows (coming soon)</a>
        <a class="btn-source" href="https://github.com/archisman-panigrahi/typhoon" target="_blank">Source Code</a>
      </div>
      
      <!-- GNU/Linux Installation Instructions -->
      <div id="ubuntu-instructions" class="instructions">
        <h2>Open a terminal and add the <a href="https://launchpad.net/~apandada1/+archive/ubuntu/typhoon" target="_blank">official PPA</a> to install Typhoon</h2>
        <pre><code>sudo add-apt-repository ppa:apandada1/typhoon

sudo apt update

sudo apt install typhoon</code></pre>
      </div>
      
      <!-- Flatpak Installation Instructions -->
      <!-- <div id="flatpak-instructions" class="instructions">
        <h2>Flatpak Installation Instructions</h2>
        <p>Coming Soon :)</p>
        <p>Install via Flatpak:</p>
        <pre><code>flatpak install flathub com.github.apandada1.Typhoon</code></pre>
        <p>Run the app with:</p>
        <pre><code>flatpak run com.github.apandada1.Typhoon</code></pre>
      </div> -->

      <div id="other-gnu-linux-instructions" class="instructions">
        <a href="https://repology.org/project/typhoon/versions">
          <img src="https://repology.org/badge/vertical-allrepos/typhoon.svg" alt="Packaging status" align="center">
        </a>
        <h2>Installation Instructions for GNU/Linux</h2>
        <ul>
          <li>
            <strong>Arch Linux:</strong> Install from the <a href="https://aur.archlinux.org/packages/typhoon-git" target="_blank">AUR</a> using your favorite AUR helper:
            <pre><code>yay -S typhoon-git</code></pre>
          </li>
          <li>
            <strong>Debian:</strong> Download the latest <a href="https://github.com/archisman-panigrahi/typhoon/releases" target="_blank">.deb file</a> from GitHub releases.
          </li>
          <li>
            <strong>Other Distributions:</strong> Download the source code from <a href="https://github.com/archisman-panigrahi/typhoon" target="_blank">GitHub</a> and build it manually:
            <pre><code>git clone https://github.com/archisman-panigrahi/typhoon.git

cd typhoon

meson setup builddir --prefix=/usr

sudo meson install -C builddir</code></pre>
          </li>
        </ul>
      </div>
    </div>
  </body>
</html>
